\documentclass[ngerman,hyperref={pdfpagelabels=true}]{beamer}
\usepackage{etex}

% -----------------------------------------------------------------------------

\graphicspath{{img/}}

% -----------------------------------------------------------------------------

\usetheme{KIT}

\setbeamercovered{transparent}
\setbeamertemplate{enumerate items}[ball]

\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}
\usepackage[TS1,T1]{fontenc}
\usepackage{array}
\usepackage[absolute,overlay]{textpos}
\usepackage{beamerKITdefs}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{listings}
\usepackage[loadonly]{enumitem}

\usetikzlibrary{trees,shapes}

\pdfpageattr {/Group << /S /Transparency /I true /CS /DeviceRGB>>}
\pdfpageattr {/Group << /S /Transparency /I true /CS /DeviceRGB>>}


\title{Pfadzerlegung zur Kompression von Tries}
\subtitle{Niklas Baumstark -- \textit{niklas.baumstark@gmail.com}}


\author{Niklas Baumstark}
\institute{ITI-Sanders}

\TitleImage[width=\titleimagewd,height=\titleimageht]{titel.jpg}

\KITinstitute{ITI}
\KITfaculty{Fakultät für Informatik}

\lstset{
basicstyle=\ttfamily\small
}

% ----------------------------------------------------------------------
\begin{document}
% ----------------------------------------------------------------------

%\AtBeginSection[]
%{\frame{\frametitle{Outline}
%\tableofcontents[currentsection]}}

\setlength\textheight{7cm} %required for correct vertical alignment, if [t] is not used as documentclass parameter

% title frame
\begin{frame}
  \maketitle
\end{frame}


\newcommand\T{\mathcal{T}}

\begin{frame}{Pfadzerlegung}
\begin{itemize}
\item Anwendbar auf beliebigen Baum $\T$
\item Erzeuge neuen Baum $\T^c$. Knoten in $\T^c$ sind Pfade in $\T$
\item Konstruktion:
\begin{enumerate}
\item W"ahle Pfad $p$ von Wurzel zu einem Blatt
\item Entferne $p$
\item Berechne rekursiv Dekompositionen $\T^c_1, \T^c_2, \ldots, \T^c_n$ der "ubrigen Teilb"aume,
geordnet nach Level der Teilbaumwurzel in $T$
\item $\T^c$ hat Wurzel $p$ mit Kindern $\T^c_1, \ldots, \T^c_n$.
\end{enumerate}
\end{itemize}
\end{frame}

\begin{frame}{Pfadzerlegung (Beispiel)}

\begin{columns}[T] % align columns
\begin{column}{.48\textwidth}

\centering
$\T$\\[1em]
\input{decomp1.tex}

\end{column}%
\hfill%
\begin{column}{.48\textwidth}

\centering
$\T^c$\\[1em]
\input{decomp2.tex}

\end{column}%
\end{columns}

\end{frame}

\begin{frame}{Pfadzerlegung}
\begin{itemize}
\item Wie entscheiden, welcher Pfad der n"achste Knoten wird?
\item Zwei grundlegende Taktiken
\begin{itemize}
\item Pfad zu linkestem Blatt im Baum
\item Folge \emph{schweren Kanten}: Immer in den gr"o"sten Teilbaum absteigen
$\rightarrow \T^c$ hat H"ohe $h = \mathcal{O}(\log |\T|)$
\end{itemize}
\end{itemize}
\end{frame}

\newcommand{\edgelabel}[2]{edge from parent node[draw=none,#1]{\lstinline|#2|}}

\begin{frame}{Pfadzerlegung eines Tries}
\begin{itemize}
\item Betrachte Patricia-Trie mit Knotenlabels
\end{itemize}

\begin{columns}[T] % align columns
\begin{column}{.48\textwidth}

\centering
\input{trie1.tex}

\end{column}%
\hfill%
\begin{column}{.48\textwidth}

%\centering
\input{trie2.tex}

\lstinline|remus| \\
\lstinline|romane| \\
\lstinline|romanus| \\
\lstinline|romulus| \\
\lstinline|ruben| \\
\lstinline|rubicon| \\

\end{column}
\end{columns}

\end{frame}

\begin{frame}{Trie-Repr"asentation}

\begin{itemize}

\item Repr"asentiere Baumstruktur von $T^c$ als \emph{depth-first unary degree sequence} (DFUDS)
\item F"uge spezielle Splitter-Buchstaben in Knotenlabels ein
\end{itemize}

\centering
\input{trie3.tex}

\[ \begin{array}{llllllllllll}
L &= &\text{\lstinline|r|} &\text{\textbf{2}}
     &&\text{\lstinline|om|} &\text{\textbf{1}}
     &\text{\lstinline|an|} &\text{\textbf{1}}
     &\text{\lstinline|e|}
     &&L_{\alpha\ldots \delta} \\
BP &= &&\text{\lstinline|(|}&\text{\lstinline|(|}
      &&\text{\lstinline|(|}
      &&\text{\lstinline|(|}
      &&\text{\lstinline|)|}
      &BP_{\alpha\ldots \delta} \\
B &= &&\text{\lstinline|e|}&\text{\lstinline|u|}
     &&\text{\lstinline|u|}
     &&\text{\lstinline|u|}
     &&&B_{\alpha\ldots \delta}
\end{array}
\]

\end{frame}

\begin{frame}{Lookup}
\begin{itemize}
\item Gegeben Zeichenkette $S$, finde Position von $S$ im zerlegten Trie $T^c$
\item Algorithmus:
\begin{itemize}
\item Scanne Label der Wurzel bis zum ersten Mismatch eines branching characters.
Sei $n$ die Summe vorhergehender Splitter und $m$ der aktuelle Splitter.
\item Teilb"aume am aktuellen Trennpunkt haben Indizes $n + 1$ bis $n + m$
\item Bin"arsuche in $B[n+1 \ldots n+m]$, um richtiges Kind zu finden
\item $i$-tes Kind beginnt bei $\text{\lstinline|FindClose|}(BP, i - 1) + 1$
\item Setze rekursiv fort
\end{itemize}
\item Laufzeit $\mathcal{O}\left(|S| + h\log |\Sigma|\right)$
\item Nur $h$ beliebige Zugriffe auf $L$, ansonsten sequentiell
%\item Nur sequentieller Zugriff auf Labels notwendig, effizient komprimierbar
%\item Nur sequentieller Zugriff auf Labels notwendig, effizient komprimierbar
\end{itemize}
\end{frame}

\end{document}
